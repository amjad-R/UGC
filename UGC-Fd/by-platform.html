
<!DOCTYPE html>
<html lang="en">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const authToken = localStorage.getItem('authToken');
    
            const loginLink = document.querySelector('a.login');
            if (authToken && loginLink) {
                loginLink.style.display = 'none';
            }
    
            axios.get('http://localhost:8000/api/user-type', {
                headers: {
                    'Authorization': `Bearer ${authToken}`,
                }
            })
            .then(response => {
                const userType = response.data.user_type;
    
                let linkContainer = document.getElementById('user-link');
                if (userType === 'creator') {
                    linkContainer.href = "creator-interface.html";
                    linkContainer.textContent = "Become a creator";
                } else if (userType === 'business') {
                    linkContainer.href = "profile-user.html";
                    linkContainer.textContent = "My Account";
                } else if (userType === 'support') {
                    linkContainer.href = "creator-interface.html";
                linkContainer.textContent = "Become a creator";

                const socialIcons = document.querySelector('.footer-bottom .social-icons');
                if (socialIcons) {
                    const adminLink = document.createElement('a');
                    adminLink.href = "admin.html";
                    adminLink.innerHTML = '<i class="fa fa-home"></i>';
                    socialIcons.appendChild(adminLink);
                }
            }
        })
            .catch(error => {
                console.error('Error fetching user type:', error);
            });
        });
    </script>
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UGC Platform</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="By-business-type&By-platform.css">
    <title>Ugc.com</title>
    <div class="promo-bar">
        <div class="contact-info">
            <span><i class="fas fa-phone"></i> 06 00 00 00 00</span>
            <span><i class="fas fa-envelope"></i> example@ugc.com</span>
        </div>
        <div class="promo-text">
            Boost your brand with authentic <a href="#">creator videos at UGC.com!</a>.
        </div>
        <div class="social-icons">
            <i class="fab fa-whatsapp"></i>
            <i class="fab fa-facebook"></i>
            <i class="fab fa-instagram"></i>
            <i class="fab fa-tiktok"></i>
        </div>
    </div>
    <nav>
        <a href="index.html" class="logo">Ugc.com</a>

        <div class="menu-icon">
            <i class="fa fa-bars"></i>
        </div>
        <ul class="nav-menu">
            <li class="services">
                <a href="#">Services</a>
                <ul>
                    <li><a href="by-platform.html">by platform</a></li>
                    <li><a href="by-business-type.html">by business type</a></li>
                </ul>
            </li>
            <li><a href="creators.html">Creators</a></li>
            <li><a href="portfolio.html">Portfolio</a></li>
            <li><a href="About-Us.html">About Us</a></li>
            <li><a href="Blog.html">Blog</a></li>

            <li class="cta-buttons">
                <a  href="Login&SigneUp.html" class="login">Login</a>
                <body class="light-mode">
                    <button id="dark-mode-toggle">
                      <span class="material-icons">dark_mode</span>
                    </button>
                  
                    <a id="user-link" href="Login&SigneUp.html" class="get-started">Get Started</a>
                  
            </li>
        </ul>
    </nav>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
          const toggleButton = document.getElementById('dark-mode-toggle');
          const body = document.body;
          const icon = toggleButton.querySelector('.material-icons');
    
          const savedMode = localStorage.getItem('dark-mode');
          if (savedMode === 'enabled') {
            body.classList.add('dark-mode');
            icon.textContent = 'light_mode'; 
          }
    
          toggleButton.addEventListener('click', () => {
            if (body.classList.contains('dark-mode')) {
              body.classList.remove('dark-mode');
              icon.textContent = 'dark_mode'; 
              localStorage.setItem('dark-mode', 'disabled');
            } else {
              body.classList.add('dark-mode');
              icon.textContent = 'light_mode'; 
              localStorage.setItem('dark-mode', 'enabled');
            }
          });
        });
      </script>

</head>
<script> 


    const menuIcon = document.querySelector('.menu-icon');
    const navMenu = document.querySelector('.nav-menu');

    menuIcon.addEventListener('click', () => {
        navMenu.classList.toggle('active');
    });

</script>
<div class="container">
    <div class="header">
        <h1>Find Creators on Your Preferred</h1>
        <h1 class="highlight">Social Platforms</h1>
        <p>Choose from top creators for each platform like TikTok, Instagram, Facebook, and more to suit your brand's
            needs.</p>
    </div>

    <div class="content">
        <div class="sidebar">
            <h3>All platforms</h3>
            <ul>
                <li class="active" data-platform="tiktok"><i class="fab fa-tiktok"></i> TikTok</li>
                <li data-platform="instagram"><i class="fab fa-instagram"></i> Instagram</li>
                <li data-platform="facebook"><i class="fab fa-facebook"></i> Facebook</li>
                <li data-platform="youtube"><i class="fab fa-youtube"></i> YouTube</li>
                <li data-platform="tv"><i class="fas fa-tv"></i> TV & Broadcast</li>
                <li data-platform="other"><i class="fas fa-globe"></i> Other Platforms</li>
            </ul>
        </div>


        
        <div class="videos">

   
            <div class="video-card" data-tab="tiktok">
                <div class="heart-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <video src="s1.mp4" controls class="video-content"></video>
                <div class="video-details">
                    <img src="p5.png" alt="Profile Picture" class="profile-pic">
                    <div class="video-info">
                        <p class="creator-name">Mannie, TikTok Specialist</p>
                        <p class="rating">
                            <i class="fas fa-star"></i> 5 <span class="click-count">(0)</span>
                        </p>
                    </div>
                </div>

            </div>
            <div class="video-card" data-tab="tiktok">
                <div class="heart-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <video src="s7.mp4" controls class="video-content"></video>
                <div class="video-details">
                    <img src="p5.png" alt="Profile Picture" class="profile-pic">
                    <div class="video-info">
                        <p class="creator-name">Mannie, TikTok Specialist</p>
                        <p class="rating">
                            <i class="fas fa-star"></i> 5 <span class="click-count">(0)</span>
                        </p>
                    </div>
                </div>

            </div>
            <div class="video-card" data-tab="tiktok">
                <div class="heart-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <video src="s5.mp4" controls class="video-content"></video>
                <div class="video-details">
                    <img src="p5.png" alt="Profile Picture" class="profile-pic">
                    <div class="video-info">
                        <p class="creator-name">Mannie, TikTok Specialist</p>
                        <p class="rating">
                            <i class="fas fa-star"></i> 5 <span class="click-count">(0)</span>
                        </p>
                    </div>
                </div>

            </div>


            <!-- <div class="video-card" data-tab="instagram">
                <video src="s2.mp4" controls class="video-content"></video>
                <div class="video-details">
                    <img src="p4.png" alt="Profile Picture" class="profile-pic">
                    <div class="video-info">
                        <p class="creator-name">Brie, Instagram Specialist</p>
                        <p class="rating"><i class="fas fa-star"></i> 4.8</p>
                    </div>
                </div>
            </div> -->

            <!-- <div class="video-card" data-tab="facebook">
                <video src="s3.mp4" controls class="video-content"></video>
                <div class="video-details">
                    <img src="p2.png" alt="Profile Picture" class="profile-pic">
                    <div class="video-info">
                        <p class="creator-name">Alex, Facebook Specialist</p>
                        <p class="rating"><i class="fas fa-star"></i> 4.8</p>
                    </div>
                </div>
            </div> -->

        </div>

    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const sidebarItems = document.querySelectorAll('.sidebar ul li');
        const videoCards = document.querySelectorAll('.video-card');
    
        sidebarItems.forEach(item => {
            item.addEventListener('click', () => {
                sidebarItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
    
                const platform = item.dataset.platform;
    
                videoCards.forEach(card => {
                    const tabs = card.dataset.tab.split(',');
                    if (tabs.includes(platform)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });
    
        const activeTab = document.querySelector('.sidebar ul li.active');
        const activePlatform = activeTab ? activeTab.dataset.platform : null;
    
        videoCards.forEach(card => {
            const tabs = card.dataset.tab.split(',');
            if (activePlatform && tabs.includes(activePlatform)) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    });
    </script>
<script>

document.addEventListener('DOMContentLoaded', () => {
    const sidebarItems = document.querySelectorAll('.sidebar ul li');
    const cardsContainer = document.querySelector('.videos');

    const sortVideosByLikes = () => {
        const videoCards = Array.from(document.querySelectorAll('.video-card'));
        videoCards.sort((a, b) => {
            const likesA = parseInt(a.querySelector('.click-count').textContent.replace(/[()]/g, '')) || 0;
            const likesB = parseInt(b.querySelector('.click-count').textContent.replace(/[()]/g, '')) || 0;
            return likesB - likesA;
        });

        cardsContainer.innerHTML = '';
        videoCards.forEach(card => cardsContainer.appendChild(card));
    };

    const filterVideosByTab = (platform) => {
        const videoCards = document.querySelectorAll('.video-card');
        videoCards.forEach(card => {
            const tabs = card.dataset.tab.split(',');
            card.style.display = tabs.includes(platform) ? 'block' : 'none';
        });
        sortVideosByLikes();
    };

    sidebarItems.forEach(item => {
        item.addEventListener('click', () => {
            sidebarItems.forEach(i => i.classList.remove('active'));
            item.classList.add('active');

            const platform = item.dataset.platform;
            filterVideosByTab(platform);
        });
    });

    const activeTab = document.querySelector('.sidebar ul li.active');
    const activePlatform = activeTab ? activeTab.dataset.platform : null;

    axios.get("http://localhost:8000/api/services/update-status/published")
        .then(response => {
            const services = response.data;

            if (!services || services.length === 0) {
                cardsContainer.innerHTML = "<p>لا توجد خدمات متاحة حاليًا.</p>";
                return;
            }

            services.sort((a, b) => (b.likes || 0) - (a.likes || 0));
            cardsContainer.innerHTML = "";

            services.forEach(service => {
                const userName = service.user ? `${service.user.first_name} ${service.user.last_name}` : 'Unknown User';
                const videoSrc = Array.isArray(service.uploaded_files) && service.uploaded_files.length > 0
                    ? service.uploaded_files[0]
                    : 'fallback-video.mp4';

                axios.get(`http://localhost:8000/api/platforms/${service.id}`)
                    .then(platformResponse => {
                        const platforms = platformResponse.data;

                        if (platforms && platforms.length > 0) {
                            const dataTabs = platforms.map(platform => platform.platform).join(',');

                            const cardHtml = `
                                <div class="video-card" data-tab="${dataTabs}" data-service-id="${service.id}">
                                    <div class="heart-icon">
                                        <i class="fas fa-heart"></i>
                                    </div>
                                    <video src="${videoSrc}" controls class="video-content"></video>
                                    <div class="video-details">
                                        <img src="${service.user && service.user.profile_image ? service.user.profile_image : 'https://via.placeholder.com/150'}" class="profile-pic" alt="Creator">
                                        <div class="video-info">
                                            <p class="creator-name">${userName}</p>
                                            <p class="rating">
                                                <i class="fas fa-star"></i><span class="click-count">(0)</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            `;

                            cardsContainer.insertAdjacentHTML("beforeend", cardHtml);

                            const videoCard = document.querySelector(`.video-card[data-service-id="${service.id}"]`);
                            axios.get(`http://localhost:8000/api/likes/${service.id}`)
                                .then(likesResponse => {
                                    const likesData = likesResponse.data;
                                    const likeCountElement = videoCard.querySelector('.click-count');
                                    const heartIcon = videoCard.querySelector('.heart-icon i');

                                    likeCountElement.textContent = `(${likesData.likes})`;

                                    if (likesData.isLiked) {
                                        heartIcon.classList.add('liked');
                                    }
                                })
                                .catch(error => {
                                    console.error(`Error fetching likes for service ${service.id}:`, error);
                                });
                        }

                        document.querySelectorAll('.video-card').forEach(card => {
                            const tabs = card.dataset.tab.split(',');
                            card.style.display = tabs.includes(activePlatform) ? 'block' : 'none';
                        });

                        document.querySelectorAll('.heart-icon').forEach(icon => {
                            icon.addEventListener('click', (e) => {
                                const authToken = localStorage.getItem("authToken");

                                if (!authToken) {
                                    alert("لم يتم العثور على التوكن. يرجى تسجيل الدخول.");
                                    return;
                                }

                                const clickedCard = e.target.closest('.video-card');
                                const serviceId = clickedCard.dataset.serviceId;
                                const heartIcon = clickedCard.querySelector('.heart-icon i');
                                const likeCountElement = clickedCard.querySelector('.click-count');
                                let likes = parseInt(likeCountElement.textContent.replace('(', '').replace(')', ''));

                                const isLiked = heartIcon.classList.contains('liked');
                                if (isLiked) {
                                    heartIcon.classList.remove('liked');
                                    likes--;
                                } else {
                                    heartIcon.classList.add('liked');
                                    likes++;
                                }

                                likeCountElement.textContent = `(${likes})`;

                                axios.post("http://localhost:8000/api/likes/toggle", {
                                    serviceId: serviceId
                                }, {
                                    headers: {
                                        Authorization: `Bearer ${authToken}`,
                                    }
                                })
                                    .then(() => {
                                        console.log('Like status updated');
                                    })
                                    .catch(error => {
                                        console.error('Error updating like status:', error);
                                    });
                            });
                        });
                    })
                    .catch(error => {
                        console.error(`Error fetching platforms for service ${service.id}:`, error);
                    });
            });

            if (activePlatform) {
                filterVideosByTab(activePlatform);
            } else {
                sortVideosByLikes();
            }
        })
        .catch(error => {
            console.error("Error fetching services:", error);
        });
});




  </script>


    



<footer>
    <div class="footer-container">
        <div class="footer-section">
            <h4>By business type</h4>
            <ul>
                <a href="by-business-type.html">
                    <li>eCommerce</li>
                </a>
                <a href="by-business-type.html">
                    <li>Agencies</li>
                </a>
                <a href="by-business-type.html">
                    <li>Apps</li>
                </a>
            </ul>
        </div>
        <div class="footer-section">
            <h4>By platform</h4>
            <ul>
                <a href="by-platform.html">
                    <li>TikTok</li>
                </a>
                <a href="by-platform.html">
                    <li>Facebook</li>
                </a>
                <a href="by-platform.html">
                    <li>Instagram</li>
                </a>
                <a href="by-platform.html">
                    <li>Other</li>
                </a>
            </ul>
        </div>
        <div class="footer-section">
            <h4>Resources</h4>
            <ul>
                <a href="index.html">
                    <li>Home</li>
                </a>
                <a href="by-platform.html">
                    <li>Services by platform</li>
                </a>
                <a href="by-business-type.html">
                    <li>Services by business</li>
                </a>
                <a href="creators.html">
                    <li>Creators</li>
                </a>
                <a href="portfolio.html">
                    <li>Portfolio</li>
                </a>
                <a href="About-Us.html">
                    <li>About Us</li>
                </a>
                <a href="Blog.html">
                    <li>Blog</li>
                </a>
                <a href="profile-user.html">
                    <li>My Account</li>
                </a>

            </ul>
        </div>
        <div class="footer-section">
            <h4>Legal</h4>
            <ul>
                <a href="Terms-of-service.html">
                    <li>Terms of service</li>
                </a>
                <a href="Privacy_Statement_Ugc.html">
                    <li>Privacy policy</li>
                </a>
                <a href="Refund_Policy_Ugc.html">
                    <li>Refund policy</li>
                </a>
            </ul>
        </div>
        <div class="footer-section">
            <h4>Contact us</h4>
            <p>584 Castro St. 2163<br>San Francisco, CA 94114</p>
            <p>+1 650 699 6740</p>
            <p>example@UJC.COM</p>
        </div>

    </div>
    <div class="footer-bottom">
        <p>Copyright 2024 By ugc. All Rights Reserved.</p>
        <div class="social-icons">
            <i class="fab fa-facebook"></i>
            <i class="fab fa-instagram"></i>
            <i class="fab fa-tiktok"></i>
            <!-- <a href="admin.html"> <i class="fa fa-home"></i></a> -->

        </div>
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</html>